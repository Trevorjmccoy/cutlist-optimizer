<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cutlist Optimizer</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }
        button {
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>Cutlist Optimizer</h1>

    <form action="/submit-form" method="post" enctype="multipart/form-data">
        <!-- Available Stock Table -->
        <h2>Available Stock</h2>
        <table id="stocks">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Length</th>
                    <th>Quantity</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be dynamically added -->
            </tbody>
        </table>
        <button type="button" onclick="addRow('stocks')">Add Row</button>

        <!-- Required Cuts Table -->
        <h2>Required Cuts</h2>
        <table id="cuts">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Length</th>
                    <th>Quantity</th>
                    <th>Plus</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be dynamically added -->
            </tbody>
        </table>
        <button type="button" onclick="addRow('cuts')">Add Row</button>

        <br><br>
        <button type="submit">Run Optimization</button>
    </form>

    <script>
        function addRow(tableId) {
            const table = document.getElementById(tableId).querySelector('tbody');
            const rowCount = table.rows.length + 1;

            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td>${rowCount}</td>
                <td><input type="number" step="any" name="${tableId === 'stocks' ? 'stock_lengths' : 'cut_lengths'}" placeholder="Enter length" required /></td>
                <td><input type="number" name="${tableId === 'stocks' ? 'stock_quantities' : 'cut_quantities'}" placeholder="Enter quantity" required /></td>
                ${tableId === 'cuts' ? `
                    <td>
                        <input type="radio" name="cut_plus_values_${rowCount}" value="0" checked />
                        <label>|____|</label>
                        <input type="radio" name="cut_plus_values_${rowCount}" value="1" />
                        <label>/____/</label>
                        <input type="radio" name="cut_plus_values_${rowCount}" value="2" />
                        <label>\\____/</label>
                    </td>` : ''}
                <td><button type="button" onclick="deleteRow(this)">Delete</button></td>
            `;
            table.appendChild(newRow);
        }

        function deleteRow(button) {
            const row = button.closest('tr');
            row.remove();

            // Update row numbers
            const table = row.closest('tbody');
            Array.from(table.rows).forEach((row, index) => {
                row.cells[0].innerText = index + 1;
            });
        }
    </script>
</body>
</html>